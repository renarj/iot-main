<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" data-bs-theme="dark">
<head th:replace="includes/header :: header">
</head>
<body style="height:100%;">
<div th:replace="includes/header :: navigation (selectTab='trains')"></div>

<div th:replace="includes/header :: trainTabs (selectTab='locomotives')"></div>

<script th:src="@{/javascript/locomotive.js}" src="/static/javascript/locomotive.js"></script>
<script src="/javascript/holder.min.js"></script>
<script src="/javascript/gauge.min.js"></script>

<script id="locTemplate" type="text/x-handlebars-template">
    <a class="list-group-item list-group-item-action locButton" id="{{thingId}}" controllerId="{{controllerId}}" href="#">{{name}}</a>
</script>

<script id="locControlTemplate" type="text/x-handlebars-template">
    <div class="col-2" id="locControl">
        <div class="card" style="width: 18rem;">
            <div class="card-header">
                <h5 class="card-title">Locomotive Control</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <figure class="figure">
                        <img data-src="holder.js/300x100?text=Placeholder Img" id="img{{thingId}}" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
                    </figure>
                </div>
                <div class="row p-2">
                    <canvas width="200" height="200" id="gaugeControl">
                    </canvas>
                </div>
                <div class="row p-2">
                    <label for="customRange2" class="form-label">Locomotive speed: 0</label>
                    <input type="range" class="form-range locSpeedControl" min="0" max="300" step="1" id="locSpeedControl" thingId="{{thingId}}" controllerId="{{controllerId}}" value="0"/>
                </div>
            </div>
        </div>
    </div>
</script>


<div class="modal fade" id="locomotiveForm" tabindex="-1" aria-labelledby="newLocLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="newLocLabel">New Locomotive</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="uniqueId" class="col-form-label">Unique ID:</label>
                        <input type="text" class="form-control" id="uniqueId">
                    </div>
                    <div class="mb-3">
                        <label for="locId" class="col-form-label">DCC - Locomotive ID (number):</label>
                        <input type="text" class="form-control" id="locId"/>
                    </div>
                    <div class="mb-3">
                        <label for="locName" class="col-form-label">Loc Name:</label>
                        <input type="text" class="form-control" id="locName"/>
                    </div>
                    <div class="mb-3">
                        <label for="controllerList" class="col-form-label">Controller:</label>
                        <select class="form-select" aria-label="Select Controller" id="controllerList">
                            <option selected>Open this select menu</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                        </select>
                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="addLocBtn">Add Locomotive</button>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid" style="height:100%;">
    <div class="row">
        <div class="col-2" id="locListPanel">
            <div class="card" style="width: 18rem;">
                <div class="card-header">
                    <h5 class="card-title">Locomotives</h5>
                </div>
                <div class="card-body">
                    <div class="list-group" id="locList">

                    </div>
                    <div class="row p-2">
                        <button type="button" class="btn btn-primary" id="openModalTrain" data-bs-toggle="modal" data-bs-target="#locomotiveForm" data-bs-whatever="@mdo">Add locomotive</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col">
            <div th:replace="train/dashboard :: train-dash"></div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</body>